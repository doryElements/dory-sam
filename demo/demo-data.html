<link rel="import" href="../../polymer/polymer-element.html">

<dom-module id="demo-data">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>

    </template>

    <script>
        /**
         * `demo-data`
         *
         *
         * @customElement
         * @polymer
         * @demo demo/index.html
         */
        class DemoData extends Polymer.Element {
            static get is() {
                return 'demo-data';
            }

            static get properties() {
                return {
                    count: {
                        type: Number,
                        value: 25
                    },
                    data: {
                        type: Array,
                        notify: true
                    }
                };
            }

            static get observers() {
                return [
                    '_generatedCountData(count)'
                ]
            }
            _generatedCountData(count) {
                let items =  this._generatedData(count);
                this.data = items;
                console.log('generated data : ', items);
            }

            _generatedData(totalCount) {
                let result = [];
                for (let i=0; i <totalCount; i++) {
                    let data = this._generateDataLine(i+1);
                    result.push(data);
                }
                return result;
            }

            _generateDataLine(i) {
                let model = {
                        id: ''+i,
                        app: 'Oura' + i,
                        description: 'Description of application nÂ°' + i + '. Please note that all of these applications are the same',
                };
                model.quali = this._generateDataLineServer(i, "Qualif");
                model.rec = this._generateDataLineServer(i, "Recette");
                model.prod = this._generateDataLineServer(i, "Prod");
                return model;
            }

            _generateDataLineServer(i, env) {
                let server = {
                    servers: [
                        {value: 'serv1', zone: 'LAN'},
                        {value: 'serv2', zone: 'DMZ'}
                    ],
                    urls: [
                        {value: 'http://uneUrlSuperLongue.pcq.desFois/onenrecontre1'},
                        {value: 'http://uneUrlSuperLongue.pcq.desFois/onenrecontre0'}
                    ],
                    bdds: [
                        {value: 'nomDatabase'+env}
                    ],
                }
                return server;
            }

        }

        window.customElements.define(DemoData.is, DemoData);
    </script>
</dom-module>