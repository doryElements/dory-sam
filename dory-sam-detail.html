<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-header-panel/paper-header-panel.html">
<link rel="import" href="dory-sam-card-item.html">
<link rel="import" href="../paper-card/paper-card.html">
<link rel="import" href="../app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../iron-media-query/iron-media-query.html">


<link rel="import" href="dory-markdown.html">
<!--
`dory-sam-detail`


@demo demo/index.html 
-->

<dom-module id="dory-sam-detail">
    <template>
        <style>
            :host {
                display: block;
                @apply(--layout-vertical);
            }

            .cardServer {
                --dory-item-color: var(--dory-icon-color-server, var(--paper-purple-800));
            }

            .cardUri {
                --dory-item-color: var(--dory-icon-color-uri, var(--paper-yellow-700));
            }

            .cardStorage {
                --dory-item-color: var(--dory-icon-color-storage, var(--paper-green-400));
            }

            .software {
                --dory-item-color: var(--dory-icon-color-software, var(--paper-blue-400));
            }

            .header {
                text-align: center;
                font-weight: bold;
                font-size: 30px;
            }

            .subline {
                @apply(--layout-horizontal);
            }

            .description {
                --dory-markdown-background-color: white
            }

            .item[small-width] {
                min-width: 100%;
            }
        </style>
        <iron-media-query query="(max-width: 600px)" query-matches="{{smallWidth}}"></iron-media-query>
        <div class="subline">
            <div>
                [[localize(data._source.env)]]
            </div>
            <div class="flex"></div>
            <template is="dom-if" if="[[data._source.ci]]">
                <div>
                    CI : [[data._source.ci]]
                </div>
            </template>
        </div>

        <dory-markdown class="flex description" value="[[data._source.description]]"></dory-markdown>


        <div>
            <label>Urls</label>
            <dory-sam-card-item items="[[data._source.uris]]" icon="maps:place" class="cardUri"></dory-sam-card-item>
        </div>
        <div class="layout horizontal flex wrap">
            <template is="dom-if" if="[[data._source.servers.length]]">
                <div class="flex item" small-width$="[[smallWidth]]">
                    <label>Serveurs</label>
                    <dory-sam-card-item items="[[data._source.servers]]" icon="dns"
                                        class="cardServer"></dory-sam-card-item>
                </div>
            </template>
            <template is="dom-if" if="[[data._source.databases.length]]">
                <div class="flex item" small-width$="[[smallWidth]]">
                    <label>Bdds</label>
                    <dory-sam-card-item items="[[data._source.databases]]" icon="device:storage"
                                        class="cardStorage"></dory-sam-card-item>
                </div>
            </template>
            <template is="dom-if" if="[[data._source.softwares.length]]">
                <div class="flex item" is="dom-if" if="[[data._source.softwares.length]]" small-width$="[[smallWidth]]">
                    <label>Softwares [[data._source.softwares.length]]</label>
                    <dory-sam-card-item items="[[data._source.softwares]]" icon="settings-applications"
                                        class="software"></dory-sam-card-item>
                </div>
            </template>
        </div>

    </template>

    <script>
        Polymer({

            is: 'dory-sam-detail',

            behaviors: [
                Polymer.AppLocalizeBehavior
            ],

            properties: {
                data: {
                    type: Object,
                },
                language: {
                    value: 'fr'
                },
                resources: {
                    value: function () {
                        return {
                            'fr': {'REC': 'Recette', 'PROD': 'Production', 'QUALIF': 'Qualif'}
                        }
                    }
                }
            }

        });
    </script>
</dom-module>
