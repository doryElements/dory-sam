<link rel="import" href="../polymer/polymer-element.html">


<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../iron-pages/iron-pages.html">
<link rel="import" href="../paper-tabs/paper-tabs.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-input/paper-textarea.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../tags-input/tags-input.html">

<link rel="import" href="dory-sam-editor-env.html">
<link rel="import" href="../water-marked-editor/water-marked-editor.html">

<dom-module id="dory-sam-editor-form">
    <template>
        <style include="iron-flex iron-flex-alignment">
            :host {

            }

            .form{
                margin  : 25px;
                background-color: var(--background-color);
            }

            paper-input{
                display : inline-block;
                width : 40%;
                min-width: 300px;
                padding : 10px;
            }

            paper-textarea{
                width : 80%;
                padding : 10px;
            }

            h3{
                color: var(--h3-color);
            }

            tags-input{
                width : 40%;
                min-width : 300px;
                padding : 10px;
            }

            .form{
                background-color: white;
                padding : 15px;
                border-radius : 5px;
                box-shadow : 2px 2px 1px #999999;
            }

        </style>
        <div class="form">
            <h3>Informations</h3>
            <paper-input value="{{data.app}}" label="Application" required></paper-input>
            <paper-input value="{{data.name}}" label="Nom" ></paper-input>
            <paper-input value="{{data.dpt}}" label="Département propriétaire"></paper-input>
            <paper-input value="{{data.type}}" label="Type" ></paper-input>
            <water-marked-editor value="{{data.description}}">
                <paper-textarea label="Description" char-counter maxlength="1000"
                                always-float-label rows="5"
                                value="{{data.description}}"></paper-textarea>
            </water-marked-editor>
            <paper-input value="{{data.doc}}" label="Documentation" ></paper-input>
            <tags-input tags="{{data.tags}}" label="Tags"></tags-input>
        </div>


        <div class="form">
            <h3>Environnements Disponibles</h3>
            <paper-tabs selected="{{tabSelected}}">
                <paper-tab>QUALIFICATION</paper-tab>
                <paper-tab>RECETTE</paper-tab>
                <paper-tab>PRODUCTION</paper-tab>
            </paper-tabs>

            <iron-pages selected="[[tabSelected]]"   fallback-selection="fallback">
                <dory-sam-editor-env data="{{data.quali}}"></dory-sam-editor-env>
                <dory-sam-editor-env data="{{data.rec}}"></dory-sam-editor-env>
                <dory-sam-editor-env data="{{data.prod}}"></dory-sam-editor-env>
            </iron-pages>
        </div>

    </template>

    <script>
        /**
         * `dory-sam-editor-form`
         *
         *
         * @customElement
         * @polymer
         * @demo demo/index.html
         */
        class DorySamEditorForm extends Polymer.Element {
            static get is() {
                return 'dory-sam-editor-form';
            }

            static get properties() {
                return {
                    data: {
                        type: Object,
                        notify: true
                    },
                    tabSelected: {
                      type: Number,
                      value: 0
                    },
                    tags : {
                        type : Array,
                        value : function(){
                            return [];
                        }
                    }
                };
            }

            createEmptyEntityModel() {
                return {
                    app: '',
                    description :'',
                    name : '',
                    dpt : '',
                    type : '',
                    doc : '',
                    tags : [],
                    quali : {
                        softwares:[],
                        urls:[],
                        bdds:[],
                        vips:[],
                        serveurs :[]
                    },
                    rec : {
                        softwares:[],
                        urls:[],
                        bdds:[],
                        vips:[],
                        serveurs :[]
                    },
                    prod : {
                        softwares:[],
                        urls:[],
                        bdds:[],
                        vips:[],
                        serveurs :[]
                    }
                }
            }
        }

        window.customElements.define(DorySamEditorForm.is, DorySamEditorForm);
    </script>
</dom-module>