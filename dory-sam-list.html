<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="dory-sam-card.html">
<link rel="import" href="dory-sam-detail.html">
<link rel="import" href="../iron-list/iron-list.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">

<!--
`dory-list`


@demo demo/index.html 
-->

<dom-module id="dory-sam-list">
    <template>
        <style>
            :host {
                display: block;
                @apply(--layout-fullbleed); /* height: 100vh; margin: 0 */
                @apply(--layout-vertical); /* display: flex; flex-direction: column; */
            }

            iron-list {
                background-color: #ddd;
                @apply(--layout-flex-auto); /* flex: 1 1 auto; */
            }
            #detaildialog {
                @apply(--layout-flex-auto); /* flex: 1 1 auto; */
                max-width: 50%;
                /*height: 200px;*/
                /*width: 200px;*/

            }
        </style>

        <paper-dialog id="detaildialog" modal>
            <dory-sam-detail data="[[currentdata]]"></dory-sam-detail>
            <paper-button dialog-confirm autofocus>Close</paper-button>
        </paper-dialog>

        <iron-list items="[[items]]" as="item" scroll-target="document" grid>
            <template>
                <dory-sam-card data="[[_mapFromElasticSearch(item)]]"></dory-sam-card>
            </template>
        </iron-list>
    </template>

    <script>
        Polymer({

            is: 'dory-sam-list',

            listeners: {
                'show-details': '_showDetails'
            },

            properties: {
                items: {
                    type: Array,
                },
            },

            _showDetails: function (e, detail) {
                this.$.detaildialog.open();
                this.currentdata = detail.data;
            },

            _mapFromElasticSearch: function(input) {
                return input;
            },

        });
    </script>
</dom-module>
